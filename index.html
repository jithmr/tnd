<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>World Time Pro</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body {
  margin: 0;
  font-family: Arial, sans-serif;
  background: #0f172a;
  color: #e5e7eb;
}
.container {
  max-width: 1000px;
  margin: auto;
  padding: 20px;
}
h1 { text-align: center; margin-bottom: 6px; }
#status { text-align: center; font-size: 14px; margin-bottom: 15px; }

.controls {
  display: flex;
  flex-wrap: wrap;
  align-items: center;
  gap: 10px;
  margin-bottom: 15px;
}

select, button {
  padding: 10px;
  border-radius: 6px;
  border: none;
  font-size: 14px;
}

.or-label {
  font-weight: bold;
  color: #facc15;
}

button {
  background: #2563eb;
  color: white;
  cursor: pointer;
}
button:hover { background: #1d4ed8; }
button.sync { background: #16a34a; }
button.sync:hover { background: #15803d; }

.toggle { display: flex; align-items: center; gap: 6px; }

.clocks {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(240px, 1fr));
  gap: 15px;
}

.clock {
  background: #020617;
  padding: 15px;
  border-radius: 10px;
  position: relative;
  text-align: center;
}

.clock .remove {
  position: absolute;
  top: 6px;
  right: 6px;
  background: transparent;
  border: none;
  color: #ef4444;
  font-size: 16px;
  cursor: pointer;
}

.clock h3 { margin: 0 0 6px; font-size: 14px; color: #93c5fd; }
.time { font-size: 22px; font-weight: bold; }
.offset { font-size: 12px; color: #a5b4fc; }
.date { font-size: 13px; color: #94a3b8; }
</style>
</head>

<body>
<div class="container">
  <h1>üåç World Time Pro</h1>
  <div id="status">Syncing with internet time‚Ä¶</div>

  <div class="controls">
    <select id="regionSelect">
      <option value="">Select country</option>
    </select>

    <span class="or-label">OR</span>

    <select id="offsetSelect">
      <option value="">Select UTC offset</option>
    </select>

    <button onclick="addClock()">Add Clock</button>
    <button class="sync" onclick="manualSync()">Sync Now</button>

    <div class="toggle">
      <input type="checkbox" id="formatToggle">
      <label>24-Hour</label>
    </div>
  </div>

  <div class="clocks" id="clocks"></div>
</div>

<script>
const clocksDiv = document.getElementById("clocks");
const regionSelect = document.getElementById("regionSelect");
const offsetSelect = document.getElementById("offsetSelect");
const formatToggle = document.getElementById("formatToggle");
const statusEl = document.getElementById("status");

let baseUTC = Date.now();
let lastSync = Date.now();

// üåê Internet sync
async function syncTime(showMsg=true){
  try{
    if(showMsg){
      statusEl.textContent="‚è≥ Syncing‚Ä¶";
      statusEl.style.color="#eab308";
    }
    const r=await fetch("https://worldtimeapi.org/api/ip",{cache:"no-store"});
    const d=await r.json();
    baseUTC=new Date(d.utc_datetime).getTime();
    lastSync=Date.now();
    statusEl.textContent="üü¢ Internet synced ‚úîÔ∏è";
    statusEl.style.color="#22c55e";
  }catch{
    baseUTC=Date.now();
    lastSync=Date.now();
    statusEl.textContent="üî¥ Offline (system time)";
    statusEl.style.color="#ef4444";
  }
}
function manualSync(){ syncTime(true); }
syncTime(false);
setInterval(()=>syncTime(false),300000);

function getUTCNow(){
  return new Date(baseUTC+(Date.now()-lastSync));
}

/* üåç COUNTRY / REGION ‚Üí TIME ZONE (ALPHABETICAL) */
const regions = [
  ["Argentina","America/Argentina/Buenos_Aires"],
  ["Australia ‚Äì Central","Australia/Adelaide"],
  ["Australia ‚Äì Eastern","Australia/Sydney"],
  ["Australia ‚Äì Western","Australia/Perth"],
  ["Austria","Europe/Vienna"],
  ["Belgium","Europe/Brussels"],
  ["Brazil","America/Sao_Paulo"],
  ["Canada ‚Äì Central","America/Winnipeg"],
  ["Canada ‚Äì Eastern","America/Toronto"],
  ["Canada ‚Äì Pacific","America/Vancouver"],
  ["China","Asia/Shanghai"],
  ["Denmark","Europe/Copenhagen"],
  ["Egypt","Africa/Cairo"],
  ["Finland","Europe/Helsinki"],
  ["France","Europe/Paris"],
  ["Germany","Europe/Berlin"],
  ["Greece","Europe/Athens"],
  ["India","Asia/Kolkata"],
  ["Ireland","Europe/Dublin"],
  ["Italy","Europe/Rome"],
  ["Japan","Asia/Tokyo"],
  ["Kenya","Africa/Nairobi"],
  ["Netherlands","Europe/Amsterdam"],
  ["Nigeria","Africa/Lagos"],
  ["Norway","Europe/Oslo"],
  ["Poland","Europe/Warsaw"],
  ["Portugal","Europe/Lisbon"],
  ["Russia ‚Äì Moscow","Europe/Moscow"],
  ["Russia ‚Äì Yekaterinburg","Asia/Yekaterinburg"],
  ["Russia ‚Äì Omsk","Asia/Omsk"],
  ["Russia ‚Äì Krasnoyarsk","Asia/Krasnoyarsk"],
  ["Russia ‚Äì Irkutsk","Asia/Irkutsk"],
  ["Russia ‚Äì Yakutsk","Asia/Yakutsk"],
  ["Russia ‚Äì Vladivostok","Asia/Vladivostok"],
  ["Spain","Europe/Madrid"],
  ["South Africa","Africa/Johannesburg"],
  ["Sweden","Europe/Stockholm"],
  ["Switzerland","Europe/Zurich"],
  ["UK","Europe/London"],
  ["USA ‚Äì Central","America/Chicago"],
  ["USA ‚Äì Eastern","America/New_York"],
  ["USA ‚Äì Mountain","America/Denver"],
  ["USA ‚Äì Pacific","America/Los_Angeles"]
];

regions.forEach(r=>{
  const o=document.createElement("option");
  o.value=r[1];
  o.textContent=r[0];
  regionSelect.appendChild(o);
});

// üîÅ Mutual exclusivity
regionSelect.addEventListener("change",()=>{
  if(regionSelect.value) offsetSelect.value="";
});
offsetSelect.addEventListener("change",()=>{
  if(offsetSelect.value) regionSelect.value="";
});

// UTC offset list
for(let m=-720;m<=840;m+=30){
  const s=m>=0?"+":"‚àí";
  const h=String(Math.floor(Math.abs(m)/60)).padStart(2,"0");
  const min=String(Math.abs(m)%60).padStart(2,"0");
  const o=document.createElement("option");
  o.value=m;
  o.textContent=`UTC ${s}${h}:${min}`;
  offsetSelect.appendChild(o);
}

// Add clock
function addClock(){
  const c=document.createElement("div");
  c.className="clock";
  c.innerHTML=`
    <button class="remove" onclick="this.parentElement.remove()">‚úñ</button>
    <h3></h3>
    <div class="time">--:--</div>
    <div class="offset">---</div>
    <div class="date">---</div>
  `;

  if(offsetSelect.value){
    c.dataset.offset=offsetSelect.value;
    c.querySelector("h3").textContent=offsetSelect.selectedOptions[0].text;
  }else{
    c.dataset.tz=regionSelect.value || "Asia/Kolkata";
    c.querySelector("h3").textContent=
      regionSelect.selectedOptions[0]?.text || "India";
  }
  clocksDiv.appendChild(c);
}

// Update clocks
function updateClocks(){
  const utcNow=getUTCNow();
  const use24=formatToggle.checked;

  document.querySelectorAll(".clock").forEach(c=>{
    let dateObj=utcNow;

    if(c.dataset.offset){
      dateObj=new Date(utcNow.getTime()+c.dataset.offset*60000);
      c.querySelector(".offset").textContent=
        offsetSelect.querySelector(`option[value="${c.dataset.offset}"]`).text;
    }

    if(c.dataset.tz){
      const tz=c.dataset.tz;
      const tf=new Intl.DateTimeFormat("en-IN",{timeZone:tz,hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!use24});
      const df=new Intl.DateTimeFormat("en-IN",{timeZone:tz,weekday:"short",day:"numeric",month:"short",year:"numeric"});
      const of=new Intl.DateTimeFormat("en",{timeZone:tz,timeZoneName:"shortOffset"});
      c.querySelector(".time").textContent=tf.format(utcNow);
      c.querySelector(".date").textContent=df.format(utcNow);
      c.querySelector(".offset").textContent=
        of.formatToParts(utcNow).find(p=>p.type==="timeZoneName").value.replace("GMT","UTC");
    }else{
      const tf=new Intl.DateTimeFormat("en-IN",{timeZone:"UTC",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!use24});
      const df=new Intl.DateTimeFormat("en-IN",{timeZone:"UTC",weekday:"short",day:"numeric",month:"short",year:"numeric"});
      c.querySelector(".time").textContent=tf.format(dateObj);
      c.querySelector(".date").textContent=df.format(dateObj);
    }
  });
}

setInterval(updateClocks,1000);
updateClocks();

// ‚úÖ DEFAULT: INDIA SELECTED & DISPLAYED
window.addEventListener("load",()=>{
  regionSelect.value = "Asia/Kolkata";   // select India in dropdown
  offsetSelect.value = "";
  addClock();
});
</script>
</body>
</html>
